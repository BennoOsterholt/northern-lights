---
- name: Shutdown a remote computer
  vars_prompt:
  - name: host
    prompt: What box to shut down?

  gather_facts: no
  hosts: "{{ host }}"
  remote_user: admin 
  become: yes
  become_method: sudo

# this works technically, but there is always an error because of a closed connection
# if this is the target, how to handle gracefully??? 
  tasks:
  - name: wait for ssh to go down... ? this dont make sense...
    local_action: wait_for host={{ ansible_ssh_host }} port=22 state=stopped  

  - name: user-instigated shutdown of "{{ host }}"
    command: /sbin/shutdown -h now
